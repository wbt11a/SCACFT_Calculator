<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>South Carolina National Guard ACFT Calculator</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
    <script type="text/javascript">
    	


    	
    	function isBlank(str) {
            return (!str || /^\s*$/.test(str));
        }

        function calcDeadLift(myVal)
        {
        	if(myVal <=80)
        		return 0;
        	if(myVal >=340)
        		return 100;


        	if(myVal <=140)
        		return (myVal - 80);
        	if(myVal <=160)
        	{
        		var multiplier = (myVal - 160)/10;
        		return (multiplier*2)+65;
        	}
        	if(myVal < 180)
        	{
        		var multiplier = (myVal-161)/10;
        		return Math.round((multiplier*2)+66);
        	}
        	
        	
        	if(myVal >= 180)
        	{
        		var multiplier = (myVal - 180)/10;
        		return (multiplier*2)+70;
        	}
        	

        }

        function calcPowerThrow(myVal)
        {
        	if(myVal <= 3.1)
        		return 0;
        	if(myVal >= 13.5)
        		return 100;

        	if(myVal <= 4.6)
        	{
        		var multiplier = (4.6-myVal) * 40;
        		return Math.round(60 - multiplier);
        	}

        	if(myVal <=6.5)
        	{
        		var multiplier = Math.round((65-(myVal*10))/3);
        		return 65-multiplier;
        	}

        	if(myVal < 8.5)
        	{
        		if(myVal == 8.4 || myVal == 8.3)
        			return 69;
        		var multiplier = (8.0-myVal)*2;
        		return Math.round(68-multiplier);
        	}
        	


        	if(myVal >= 8.5)
        	{
        		var map = { '8.5':70,
        					'8.6':71, 
        					'8.8':72,
        					'8.9':73,
        					'9.1':74,
        					'9.2':75,
        					'9.4':76,
        					'9.5':77,
        					'9.7':78,
        					'9.8':79,
        					'10.0':80,
        					'10.1':81,
        					'10.3':82,
        					'10.4':83,
        					'10.6':84,
        					'10.7':85,
        					'10.9':86,
        					'11.0':87,
        					'11.2':88,
        					'11.3':89,
        					'11.5':90,
        					'11.6':91,
        					'11.8':92,
        					'11.9':93,
        					'12.1':94,
        					'12.3':95,
        					'12.5':96,
        					'12.8':97,
        					'13.0':98,
        					'13.2':99,
        					'13.5':100
        				   }

        		
        		while(map[myVal.toString()]==undefined)
        			myVal=myVal - 0.1;
        		return map[myVal.toString()];


        	}

        }

        function calcPushUps(myVal)
        {
        	if(myVal<1)
        		return 0;
        	if(myVal >= 70)
        		return 100;

        	if(myVal <=10)
        		return myVal*6;

        	if(myVal <=30)
        		return 70 - Math.round((30 - myVal)/2);
        	
        	if(myVal <=49)
        		return 89 - (49-myVal);

        	if(myVal <=69)
        	{
        		if(myVal >= 68) return 99;

        		if(myVal % 2 != 0)
        			myVal--;

        		return (98-(66-myVal)/2);

        	}
        }




    	$(document).ready(function() {
    		$("#errorBlock").hide();


    		//on submit
    		$("#submit").click(function(e){
    			var invalidError = 0;
    			var emptyError = 0;
    			
    			$('#errorBlock').find('p').remove();
    			$('#errorBlock').hide();

    			$("input").map(function(){
    				$(this).removeClass('errorBorder');
    				
    				if(!$(this).val()){
    					$(this).addClass('errorBorder');
    					emptyError++;
    				}

    				if($(this).attr('id') =="sprintDragCarry" || $(this).attr('id')=="twoMileRun" )
    				{
    					var text = $(this).val();
    					if(text.indexOf(':') == -1)
    					{
    						$('#errorBlock').show();
    						$(this).addClass('errorBorder');
    						invalidError++;
    					}

    				}
    				else if (!$.isNumeric($(this).val())) {
    					$(this).addClass('errorBorder');
    					invalidError++;
    				}
    					
    				
    			});

    			if(emptyError > 0){
    				$('#errorBlock').show();
    				$('<p>All fields must contain a valid value.</p>').appendTo("#errorBlock");

    			};

    			if(invalidError > 0){
    				$('#errorBlock').show();
    				$('<p>Incorrect value entered or time not formatted correctly.</p>').appendTo("#errorBlock");
    			}

    			if(invalidError + emptyError != 0)
    				return;

    			var deadLift = calcDeadLift($("#deadliftWgt").val());
    			var powerThrow = calcPowerThrow($("#powerThrowDis").val());
    			var pushups = calcPushUps($("#releasePushup").val());
    			var sdc = $("#sprintDragCarry").val();
    			var legTuck = $("#legTuck").val();
    			var twoMile = $("#twoMileRun").val();

    			//alert(calcPushUps($("#releasePushup").val()));


    		}); //end onclick
    		
    	

    	});  //end ready
    </script>
    <style>
     h1 {
     	font-weight: bold;
     }
        .jumbotron {
            width: 100%;
            border: lightgrey  solid 1px !important;
        }
        .top-buffer { margin-top:20px; }
  	 	.errorText { color: red; }
  	 	.errorBorder {border-color: red;}


    </style>
</head>
<body>
	<div class="jumbotron jumbotron-fluid">
	<div class="row">
		<div class="d-flex justify-content-between">
			<div class="col-md-8">
				<img  alt="SC National Guard" src="logo.png" />
			</div>
			<div class="col-md-4">
				<h1>
					ACFT Calculator
				</h1>
			</div>
		</div>
	</div>
	</div>
	<div class="row">
		<div class="col-md-4">
			<h1>Instructions</h1>
			<ul id="exercises">
  <li><b>Deadlift:</b> Weight must be between 120 and 420 pounds. Three reps must be performed in five minutes.</li>
  <li><b>Power Throw:</b> A 10-pound medicine ball will be thrown overhead and backward. There is a three minutes restriction to make one practice throw and two for a grade. The longest distance is recorded.</li>
  <li><b>Release Push-Ups:</b> The Soldier must lower his/her chest to the floor and lift his/her hands off the ground between each rep. Soldiers are given three minutes to do as many reps as they can.</li>
  <li><b>Sprint Drag Carry:</b>  In four minutes, the Soldier will go 25 meters out and 25 meters back five times. Each iteration will include a different activity: sprint, drag a sled, run a lateral shuffle, carry two 40-pound kettle bells, then sprint again.</li>
  <li><b>Leg Tuck:</b> The Soldier will be required to hang from a pull-up bar and with his/her body parallel, then pull their knees to their elbows for as many reps as possible in two minutes.</li>
  <li><b>Two Mile Run:</b> Two-mile run on a track or a paved, level road, with a 21-minute maximum</li>
</ul>
		</div>
		
		
			<div class="col-md-8">
				<h1>Soldier Data</h1>
				<div class="row">
					<div class="col-sm-2">
					<!--<div class="form-group">-->
						 <label left id="deadliftWgtLbl" for="deadliftWgt">Deadlift Weight</label>
						 <input  placeholder="0" class="form-control " id="deadliftWgt" name="deadliftWgt"/>
						  <label left id="powerThrowDisLbl" for="powerThrowDis">Power Throw Distance</label>
						 <input  placeholder="0.0"class="form-control " id="powerThrowDis" name="powerThrowDis"/>

						 <label left id="releasePushupLbl" for="releasePushup">Release Pushups</label>
						 <input placeholder="0" class="form-control" id="releasePushup" name="releasePushup"/>
						 
				
					</div>



					<div class="col-sm-2">
						 <label left id="sprintDragCarryLbl" for="sprintDragCarry">Sprint Drag Carry</label>
						 <input  placeholder="0:00" class="form-control " id="sprintDragCarry" name="sprintDragCarry"/>
						 
						 <label left id="legTuckLbl" for="legTuck">Leg Tuck</label>
						 <input placeholder="0" class="form-control " id="legTuck" name="legTuck"/>
						 <label left id="twoMileRunLbl" for="twoMileRun">Two Mile Run</label>
						 <input  placeholder="0:00" class="form-control " id="twoMileRun" name="twoMileRun"/>
					</div>
				</div>

				<div class="row">
					<div class="col-sm-4">
						<label id="soldierCatLbl" for="soldierCat">Soldier Category</label> 
						<select id="soldierCat" name="soldierCat" class="form-control">
							<option value="1">Moderate Physical Demand (60%)</option>
							<option value="2">Significant Physical Demand (65%)</option>
							<option value="3">Heavy Physical Demand (70%)</option>
						</select>

					</div> 
				</div>
				<div class="row top-buffer">
					<div class="col-sm-4">
						
						<button id="submit" type="submit" class="btn btn-primary">Calculate</button>
					</div>
				</div>
				<div class="row" >
					<div  id="errorBlock" class="col-sm-4 errorText">
						
					</div>
				</div>
					
					

		
						
			</div> <!--row-->

</body>
</html>